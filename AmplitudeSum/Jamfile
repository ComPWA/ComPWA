########### AmplitudeSum lib #############
import os ;

local BOOST_BUILD_PATH = [ os.environ BOOST_BUILD_PATH ] ;

BOOSTLIBS = -lboost_date_time -lboost_filesystem -lboost_program_options -lboost_regex -lboost_serialization -lboost_system -lboost_thread-mt -lboost_test_exec_monitor -L$(BOOST_BUILD_PATH)/lib ;

local ROOTSYS = [ os.environ ROOTSYS ] ;
local ROOTINC = [ os.environ ROOTINCLUDE ] ;

local rlibs = [ SHELL "$ROOTSYS/bin/root-config --libs" ] ;
ROOTLIBS = [ MATCH "(.*)[\n]" : $(rlibs) ] ;

project :
	requirements <include>./
        <include>$(TOP)/Core
        <include>$(TOP)/external/qft++/include
        <include>$(ROOTINC)
	    <include>$(BOOST_BUILD_PATH)/include
	<cxxflags>-ftemplate-depth-256
	<cxxflags>-std=c++0x
	<linkflags>$(ROOTLIBS)
	<linkflags>-lEG
	<linkflags>-lRooFit
	<linkflags>-lRooFitCore
	<linkflags>-L/local/home/mathias/workspace/nextPWA/external/qft++/lib
	<linkflags>-lqft++
	<linkflags>$(BOOSTLIBS)
	;

lib AmpSum : 
        [ glob *.cpp : *Test.cpp ] 
        $(TOP)/Core//ComPWA
        ;

install dist : AmpSum : <location>$(TOP)/lib ;

##using testing ;
##lib boost_unit_test_framework ;
##run DataTest.cpp DIFRoot2Part $(TOP)/Core//ComPWA boost_unit_test_framework ;
