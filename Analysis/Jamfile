########### Physics Jamfile #############
path-constant ANALYSIS : . ;

import os ;

local BOOST_ROOT = [ os.environ BOOST_ROOT ] ;
local ROOTSYS = [ os.environ ROOTSYS ] ;
local QFT = [ os.environ QFT ] ;
local MINUIT2 = [ os.environ MINUIT2 ] ;

BOOSTLIBS = -lboost_date_time -lboost_filesystem -lboost_program_options -lboost_regex -lboost_serialization -lboost_system -lboost_thread -lboost_test_exec_monitor ;
local rlibs = [ SHELL "$ROOTSYS/bin/root-config --libs" ] ;
ROOTLIBS = [ MATCH "(.*)[\n]" : $(rlibs) ] ;

project :
	requirements <include>./
	    <include>$(TOP)
	<include>$(ROOTSYS)/include
	<include>$(BOOST_ROOT)/include
	<include>$(GENEVA)/include
        <include>$(QFT)/include
        <include>$(MINUIT2)/include
	<linkflags>-L$(BOOST_ROOT)/lib 
	<linkflags>$(BOOSTLIBS)
	<linkflags>$(ROOTLIBS)
	<linkflags>-lEG
	<linkflags>-lRooFit
	<linkflags>-lRooFitCore
	;

lib Analysis : 
        [ glob PlotData.cpp ] 
        $(TOP)/Core//ComPWA
   		$(TOP)/DataReader/RootReader//RootReader
        ;

exe gendalitzApp : 
        GenDalitzApp.cpp 
        Analysis
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/AmplitudeSum//AmplitudeSum  
        $(TOP)/DataReader/RootReader
        $(TOP)/Estimator/MinLogLH//MinLogLH 
        $(TOP)/Optimizer/Minuit2//Minuit2IF
        $(TOP)/Physics/DPKinematics//DPKinematics
        : ;
exe gendalitz2App : 
        GenDalitz2App.cpp 
        Analysis
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/AmplitudeSum//AmplitudeSum  
        $(TOP)/DataReader/RootReader
        $(TOP)/Estimator/MinLogLH//MinLogLH 
        $(TOP)/Optimizer/Minuit2//Minuit2IF
        $(TOP)/Physics/DPKinematics//DPKinematics
        : ;

exe ampSvc : 
        AmpSvc.cpp 
        Analysis
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/AmplitudeSum//AmplitudeSum  
        #: <linkflags>-Wl,-rpath=/usr/lib64 
        : 
;
        
exe dalitzfitApp : 
        DalitzFitApp.cpp 
        Analysis
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/AmplitudeSum//AmplitudeSum  
        $(TOP)/DataReader/RootReader//RootReader
        $(TOP)/Estimator/MinLogLH//MinLogLH 
        $(TOP)/Optimizer/Minuit2//Minuit2IF
        #: <linkflags>-static 
;

install dist : Analysis : <location>$(TOP)/lib ;
install dist2 : dalitzfitApp gendalitzApp gendalitz2App ampSvc : <location>$(TOP)/bin <threading>single ;

