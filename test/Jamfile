########### test apps #############

project ComPWA/test 
	: requirements 
	  <include>.

       <library>/boost//program_options
       <library>/boost//filesystem
       <library>/boost//serialization

	  <library>/root
	  <linkflags>-lRooFit
	  <linkflags>-lRooFitCore

	  <library>$(TOP)//qft++
	;

lib test : 
        [ glob *.cpp : *App.cpp ]
        $(TOP)/Optimizer//Optimizer 
        : : ;
        

#exe cx0testApp : 
#        CX0TestApp.cpp 
#        test
#        : ;
        
exe treetestApp : 
        TreeTestApp.cpp 
        test
        $(TOP)/Core//ComPWA
        : ;
        
exe dataiftestApp : 
        DataIFTestApp.cpp 
        test
        $(TOP)/Core//ComPWA
        $(TOP)/DataReader/RootReader//RootReader
        : ;

if $(GENEVA) { 
exe optimizertestApp : 
        OptimizerTestApp.cpp
        test
        $(TOP)/Core//ComPWA
        $(TOP)/Estimator/MinLogLH//MinLogLH
        $(TOP)/Optimizer/Minuit2//Minuit2IF
        $(TOP)/Optimizer/Geneva//GenevaIF
        $(TOP)/DataReader/RootReader//RootReader
        $(TOP)/Physics/DPKinematics//DPKinematics
        : ;
} else {
exe optimizertestApp : 
        MinuitTestApp.cpp
        test
        $(TOP)/Core//ComPWA
        $(TOP)/Estimator/MinLogLH//MinLogLH
        $(TOP)/Optimizer/Minuit2//Minuit2IF
        $(TOP)/DataReader/RootReader//RootReader
        $(TOP)/Physics/DPKinematics//DPKinematics
        : ;
}

exe physicstestApp : 
        PhysicsTestApp.cpp 
        test
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/BreitWigner//BreitWigner
        : ;
        
exe estimatortestApp : 
        EstimatorTestApp.cpp 
        test
        $(TOP)/Core//ComPWA
        $(TOP)/Estimator/MinLogLH//MinLogLH
        $(TOP)/Estimator/ChiOneD//ChiOneD
        $(TOP)/Physics/BreitWigner//BreitWigner
        $(TOP)/DataReader/RootReader//RootReader
        : ;
        
exe integrationtestApp : 
        IntegrationTestApp.cpp
        test
        $(TOP)/Core//ComPWA
        $(TOP)/Estimator/MinLogLH//MinLogLH
        $(TOP)/Physics/BreitWigner//BreitWigner
        $(TOP)/DataReader/RootReader//RootReader
        $(TOP)/Optimizer/Minuit2//Minuit2IF
        : ;
        
exe integrationtestbinnedApp : 
        IntegrationTestBinnedApp.cpp 
        test
        $(TOP)/Core//ComPWA
        $(TOP)/Estimator/ChiOneD//ChiOneD 
        $(TOP)/Physics/BreitWigner//BreitWigner   
        $(TOP)/DataReader/RootReader//RootReader
        $(TOP)/Optimizer/Minuit2//Minuit2IF
        : ;
        
#exe blackscholesApp : 
#        BlackScholesApp.cpp 
#        test
#        $(TOP)/Core//ComPWA
#        $(TOP)/Estimator/StockLeastSquares//StockLeastSquares 
#        $(TOP)/Physics/BlackScholes//BlackScholes   
#        $(TOP)/DataReader/StockReader//StockReader
#        $(TOP)/Optimizer/Minuit2//Minuit2IF
#        : ;
#        
#exe neuralnetworkApp : 
#        NeuralNetworkApp.cpp 
#        test
#        $(TOP)/Core//ComPWA
#        $(TOP)/Estimator/StockLeastSquares//StockLeastSquares 
#        $(TOP)/Physics/NeuralNetwork//NeuralNetwork   
#        $(TOP)/DataReader/StockReader//StockReader
#        $(TOP)/Optimizer/Geneva//GenevaIF
#        $(TOP)/Optimizer/Minuit2//Minuit2IF
#        : ;
        
exe runmanagertestApp : 
        RunManagerTestApp.cpp 
        test
        $(TOP)/Core//ComPWA
        $(TOP)/Estimator/MinLogLH//MinLogLH 
        $(TOP)/Physics/BreitWigner//BreitWigner   
        $(TOP)/DataReader/RootReader//RootReader
        $(TOP)/Optimizer/Minuit2//Minuit2IF
        : ;
        
exe gentwopartApp : 
        GenTwoPartApp.cpp 
        test
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/BreitWigner//BreitWigner  
        : ;
        
exe dpareaTestApp : 
        DPareaTestApp.cpp 
        test
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/DPKinematics//DPKinematics
        : ;

exe genRunManager : 
        GenRunManagerApp.cpp 
        test
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/AmplitudeSum//AmplitudeSum  
        $(TOP)/DataReader/RootReader//RootReader  
        $(TOP)/Physics/DPKinematics//DPKinematics  
        : ;

exe gendalitzApp : 
        GenDalitzApp.cpp 
        test
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/AmplitudeSum//AmplitudeSum  
        $(TOP)/Physics/DPKinematics//DPKinematics  
        : ;
        
exe compareTreeAmpApp : 
        CompareTreeAmpApp.cpp 
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/AmplitudeSum//AmplitudeSum  
        $(TOP)/DataReader/RootReader//RootReader  
        $(TOP)/Optimizer//Optimizer
        $(TOP)/Estimator/MinLogLH//MinLogLH 
        $(TOP)/Optimizer/Minuit2//Minuit2IF
        $(TOP)/Physics/DPKinematics//DPKinematics  
        : ;

exe lhNormalizationTestApp : 
        LHNormalizationTestApp.cpp 
        test
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/AmplitudeSum//AmplitudeSum  
        $(TOP)/DataReader/RootReader//RootReader  
        $(TOP)/Optimizer//Optimizer
        $(TOP)/Estimator/MinLogLH//MinLogLH 
        $(TOP)/Optimizer/Minuit2//Minuit2IF
        $(TOP)/Physics/DPKinematics//DPKinematics  
        : ;

exe dalitzplotApp : 
        DalitzDataPlotterApp.cpp 
        test
        $(TOP)/Core//ComPWA
        $(TOP)/DataReader/RootReader//RootReader  
        $(TOP)/Physics/DPKinematics//DPKinematics  
        : ;
        
exe dalitzfitApp : 
        DalitzFitApp.cpp 
        test
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/AmplitudeSum//AmplitudeSum
        $(TOP)/Physics/DPKinematics//DPKinematics
        $(TOP)/DataReader/RootReader//RootReader
        $(TOP)/Optimizer//Optimizer
        $(TOP)/Estimator/MinLogLH//MinLogLH
        $(TOP)/Optimizer/Minuit2//Minuit2IF
        : ;
        
exe slicefitApp : 
        SliceFitApp.cpp 
        test
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/AmplitudeSum//AmplitudeSum
        $(TOP)/Physics/DPKinematics//DPKinematics
        $(TOP)/DataReader/RootReader//RootReader
        $(TOP)/Estimator/SliceFit//SliceFit
        $(TOP)/Optimizer/Minuit2//Minuit2IF
        $(TOP)/Physics/DPKinematics//DPKinematics
        : ;
        
exe helicityDecayTreeTestApp : 
        HelicityDecayTreeTestApp.cpp 
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/HelicityAmplitude//HelicityAmplitude
        : ;
        
exe helicityAmplitudeTreeTestApp : 
        HelicityAmplitudeTreeTestApp.cpp 
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/HelicityAmplitude//HelicityAmplitude
        : ;        

exe serializeApp 
	: SerializationApp.cpp 
       test
       $(TOP)/Core//ComPWA
     : ;
        
exe multiVariateGaussianTestApp 
	: MultiVariateGaussianTestApp.cpp  
	  test 
	: <library>/gsl 
	  <library>/root
	;

exe openMPTestApp 
	: OpenMPTestApp.cpp  
	  test 
        $(TOP)/Core//ComPWA
        $(TOP)/Physics/AmplitudeSum//AmplitudeSum
        $(TOP)/Physics/DPKinematics//DPKinematics
        $(TOP)/DataReader/RootReader//RootReader
        $(TOP)/Optimizer//Optimizer
        $(TOP)/Estimator/MinLogLH//MinLogLH
        $(TOP)/Optimizer/Minuit2//Minuit2IF
	: <library>/gsl 
	  <library>/root
	  #<cxxflags>-fopenmp
	;

install dist 
	: test 
	: <threading>single
	  <location>$(TOP)lib/ ;

install dist2 
	: compareTreeAmpApp 
	  dalitzfitApp 
	  slicefitApp 
	  treetestApp 
	  dataiftestApp 
	  optimizertestApp 
	  physicstestApp 
	  estimatortestApp 
	  integrationtestApp 
	  integrationtestbinnedApp 
	  runmanagertestApp 
	  gentwopartApp 
	  gendalitzApp 
	  dalitzplotApp 
	  serializeApp 
	  dpareaTestApp 
	  genRunManager 
	  openMPTestApp
	  lhNormalizationTestApp
	  multiVariateGaussianTestApp
	: <threading>single
	  <location>$(TOP)/bin ;

install dist4 
	: helicityDecayTreeTestApp 
	  helicityAmplitudeTreeTestApp 
	: <threading>single 
	  <location>$(TOP)/bin ;